<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/structure/carp_rift - Space Station 13</title></head><body><header><a href="index.html">Space Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/structure/carp_rift.html#var">Var Details</a> - <a href="obj/structure/carp_rift.html#proc">Proc Details</a></header><main><h1>Carp Rift <aside>/<a href="obj.html">obj</a>/<a href="obj/structure/carp_rift.html">structure/carp_rift</a></aside> <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L535"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 535"></a></h1><p>The portals Space Dragon summons to bring carp onto the station.</p>
<p>The portals Space Dragon summons to bring carp onto the station.  His main objective is to summon 3 of them and protect them from being destroyed.
The portals can summon sentient space carp in limited amounts.  The portal also changes color based on whether or not a carp spawn is available.
Once it is fully charged, it becomes indestructible, and intermitently spawns non-sentient carp.  It is still destroyed if Space Dragon dies.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/structure/carp_rift.html#var/carp_interval">carp_interval</a></th><td>The interval for adding additional space carp spawns to the rift.</td></tr><tr><th><a href="obj/structure/carp_rift.html#var/carp_stored">carp_stored</a></th><td>How many carp spawns it has available.</td></tr><tr><th><a href="obj/structure/carp_rift.html#var/charge_state">charge_state</a></th><td>Current charge state of the rift.</td></tr><tr><th><a href="obj/structure/carp_rift.html#var/dragon">dragon</a></th><td>A reference to the Space Dragon that created it.</td></tr><tr><th><a href="obj/structure/carp_rift.html#var/last_carp_inc">last_carp_inc</a></th><td>The time since an extra carp was added to the ghost role spawning pool.</td></tr><tr><th><a href="obj/structure/carp_rift.html#var/max_charge">max_charge</a></th><td>The maximum charge the rift can have.</td></tr><tr><th><a href="obj/structure/carp_rift.html#var/time_charged">time_charged</a></th><td>The amount of time the rift has charged for.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/structure/carp_rift.html#proc/summon_carp">summon_carp</a></th><td>Used to create carp controlled by ghosts when the option is available.</td></tr><tr><th><a href="obj/structure/carp_rift.html#proc/update_check">update_check</a></th><td>Does a series of checks based on the portal's status.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/carp_interval"><aside class="declaration">var </aside>carp_interval <aside>– </aside> <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L558"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 558"></a></h3><p>The interval for adding additional space carp spawns to the rift.</p><h3 id="var/carp_stored"><aside class="declaration">var </aside>carp_stored <aside>– </aside> <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L552"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 552"></a></h3><p>How many carp spawns it has available.</p><h3 id="var/charge_state"><aside class="declaration">var </aside>charge_state <aside>– </aside> <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L556"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 556"></a></h3><p>Current charge state of the rift.</p><h3 id="var/dragon"><aside class="declaration">var </aside>dragon <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/simple_animal.html">simple_animal</a>/<a href="mob/living/simple_animal/hostile.html">hostile</a>/<a href="mob/living/simple_animal/hostile/space_dragon.html">space_dragon</a></aside> <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L554"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 554"></a></h3><p>A reference to the Space Dragon that created it.</p><h3 id="var/last_carp_inc"><aside class="declaration">var </aside>last_carp_inc <aside>– </aside> <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L560"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 560"></a></h3><p>The time since an extra carp was added to the ghost role spawning pool.</p><h3 id="var/max_charge"><aside class="declaration">var </aside>max_charge <aside>– </aside> <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L550"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 550"></a></h3><p>The maximum charge the rift can have.</p><h3 id="var/time_charged"><aside class="declaration">var </aside>time_charged <aside>– </aside> <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L548"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 548"></a></h3><p>The amount of time the rift has charged for.</p><h2 id="proc">Proc Details</h2><h3 id="proc/summon_carp"><aside class="declaration">proc </aside>summon_carp<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L674"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 674"></a></aside></h3><p>Used to create carp controlled by ghosts when the option is available.</p>
<p>Creates a carp for the ghost to control if we have a carp spawn available.
Gives them prompt to control a carp, and if our circumstances still allow if when they hit yes, spawn them in as a carp.
Also add them to the list of carps in Space Dragon's antgonist datum, so they'll be displayed as having assisted him on round end.
Arguments:</p>
<ul>
<li>mob/user - The ghost which will take control of the carp.</li>
</ul><h3 id="proc/update_check"><aside class="declaration">proc </aside>update_check<aside>()  <a href="https://github.com/nopeingeneer/another_useless_fork/blob/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd/code/modules/mob/living/simple_animal/hostile/space_dragon.dm#L623"><img src="git.png" width="16" height="16" title="code/modules/mob/living/simple_animal/hostile/space_dragon.dm 623"></a></aside></h3><p>Does a series of checks based on the portal's status.</p>
<p>Performs a number of checks based on the current charge of the portal, and triggers various effects accordingly.
If the current charge is a multiple of carp_interval, add an extra carp spawn.
If we're halfway charged, announce to the crew our location in a CENTCOM announcement.
If we're fully charged, tell the crew we are, change our color to yellow, become invulnerable, and give Space Dragon the ability to make another rift, if he hasn't summoned 3 total.</p></main><footer>tgstation.dme <a href="https://github.com/nopeingeneer/another_useless_fork/tree/50ccb8a5dfc794d8855892f8ac6f5bb8580ed0bd">50ccb8a</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>